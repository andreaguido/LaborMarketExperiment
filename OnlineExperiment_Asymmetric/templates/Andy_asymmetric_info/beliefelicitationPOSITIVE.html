{% extends "global/Page.html" %}
{% load staticfiles otree_tags %}
{% block app_styles %}

<style>
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 2px;
    text-align: center;
}
tr { line-height: 19px; }

table#t01 {
    width: 100%;
    background-color: #f1f1c2;
}
</style>
{% endblock %}

{% block content %}

    <h3>1. Guess Task:</h3>
Please use the table below to complete the Guess Task by moving the sliders. <br><br>There is a summary of Guess Task instructions at the
bottom of this page should you need to remind yourself of how to complete the Guess Task and/or how
you are paid for completing the Guess Task.
<br><br><br>
Your guesses in the previous Guess Task: <br><br>

{% if num_round == 14 %}
<table class="tg" width="800", align="center">
  <tr>
    <th class="tg-us36">Wages</th>
    <th class="tg-us36">1</th>
    <th class="tg-us36">2</th>
    <th class="tg-us36">3</th>
    <th class="tg-us36">4</th>
    <th class="tg-us36">5</th>
    <th class="tg-us36">6</th>
    <th class="tg-us36">7</th>
    <th class="tg-us36">8</th>
    <th class="tg-us36">9</th>
    <th class="tg-us36">10</th>
    <th class="tg-us36">11</th>
    <th class="tg-us36">12</th>
  </tr>
  <tr>
    <td class="tg-us36">Guess on Effort</td>
    <td class="tg-us36">    {{ pre_eleffort_13_1 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_2 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_3 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_4 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_5 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_6 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_7 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_8 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_9 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_10 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_11 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_13_12 }}</td>
  </tr>
</table>

{% elif num_round == 18 %}
<table class="tg" width="800", align="center">
  <tr>
    <th class="tg-us36">Wages</th>
    <th class="tg-us36">1</th>
    <th class="tg-us36">2</th>
    <th class="tg-us36">3</th>
    <th class="tg-us36">4</th>
    <th class="tg-us36">5</th>
    <th class="tg-us36">6</th>
    <th class="tg-us36">7</th>
    <th class="tg-us36">8</th>
    <th class="tg-us36">9</th>
    <th class="tg-us36">10</th>
    <th class="tg-us36">11</th>
    <th class="tg-us36">12</th>
    <th class="tg-us36">13</th>
    <th class="tg-us36">14</th>
    <th class="tg-us36">15</th>
    <th class="tg-us36">16</th>
  </tr>
  <tr>
    <td class="tg-us36">Guess on Effort</td>
    <td class="tg-us36">    {{ pre_eleffort_14_1 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_2 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_3 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_4 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_5 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_6 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_7 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_8 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_9 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_10 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_11 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_12 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_13 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_14 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_15 }}</td>
    <td class="tg-us36">    {{ pre_eleffort_14_16 }}</td>
  </tr>
</table>
{% endif %}
<br><br>
    <div align="center"><font color="#ff000">Note: negative payoffs are not allowed. You can proceed only if the employer's payoff is non-negative</font>
</div>
<table style="..." id = "t01" border="1" width="372" align="center">
<tbody>
<tr>
<td style="... text-align: center;">Wages</td>
<td style="... text-align: center;">Guess on Effort</td>
<td style="...">Worker's payoff</td>
<td style="...">Your payoff</td>
</tr>
<tr>
<td style="...">1</td>
<td style="...">{% formfield player.eleffort1 %} </td>
<td style="..."><span id="resultats1"> </span></td>
<td style="..."><span id="fresultats1"> </span></td>
</tr>
<tr>
<td style="...">2</td>
<td style="...">{% formfield player.eleffort2 %}</td>
<td style="..."><span id="resultats2"> </span></td>
<td style="..."><span id="fresultats2"> </span></td>
</tr>
<tr>
<td style="...">3</td>
<td style="...">{% formfield player.eleffort3 %}</td>
<td style="..."><span id="resultats3"> </span></td>
<td style="..."><span id="fresultats3"> </span></td>
</tr>
<tr>
<td style="...">4</td>
<td style="...">{% formfield player.eleffort4 %}</td>
<td style="..."><span id="resultats4"> </span></td>
<td style="..."><span id="fresultats4"> </span></td>
</tr>
<tr>
<td style="...">5</td>
<td style="...">{% formfield player.eleffort5 %}</td>
<td style="..."><span id="resultats5"> </span></td>
<td style="..."><span id="fresultats5"> </span></td>
</tr>
<tr>
<td style="...">6</td>
<td style="...">{% formfield player.eleffort6 %}</td>
<td style="..."><span id="resultats6"> </span></td>
<td style="..."><span id="fresultats6"> </span></td>
</tr>
<tr>
<td style="...">7</td>
<td style="...">{% formfield player.eleffort7 %}</td>
<td style="..."><span id="resultats7"> </span></td>
<td style="..."><span id="fresultats7"> </span></td>
</tr>
<tr>
<td style="...">8</td>
<td style="...">{% formfield player.eleffort8 %}</td>
<td style="..."><span id="resultats8"> </span></td>
<td style="..."><span id="fresultats8"> </span></td>
</tr>
<tr>
<td style="...">9</td>
<td style="...">{% formfield player.eleffort9 %}</td>
<td style="..."><span id="resultats9"> </span></td>
<td style="..."><span id="fresultats9"> </span></td>
</tr>
<tr>
<td style="...">10</td>
<td style="...">{% formfield player.eleffort10 %}</td>
<td style="..."><span id="resultats10"> </span></td>
<td style="..."><span id="fresultats10"> </span></td>
</tr>
<tr>
<td style="...">11</td>
<td style="...">{% formfield player.eleffort11 %}</td>
<td style="..."><span id="resultats11"> </span></td>
<td style="..."><span id="fresultats11"> </span></td>
</tr>
<tr>
<td style="...">12</td>
<td style="...">{% formfield player.eleffort12 %}</td>
<td style="..."><span id="resultats12"> </span></td>
<td style="..."><span id="fresultats12"> </span></td>
</tr>
<tr>
<td style="...">13</td>
<td style="...">{% formfield player.eleffort13 %}</td>
<td style="..."><span id="resultats13"> </span></td>
<td style="..."><span id="fresultats13"> </span></td>
</tr>
<tr>
<td style="...">14</td>
<td style="...">{% formfield player.eleffort14 %}</td>
<td style="..."><span id="resultats14"> </span></td>
<td style="..."><span id="fresultats14"> </span></td>
</tr>
<tr>
<td style="...">15</td>
<td style="...">{% formfield player.eleffort15 %}</td>
<td style="..."><span id="resultats15"> </span></td>
<td style="..."><span id="fresultats15"> </span></td>
</tr>
<tr>
<td style="...">16</td>
<td style="...">{% formfield player.eleffort16 %}</td>
<td style="..."><span id="resultats16"> </span></td>
<td style="..."><span id="fresultats16"> </span></td>
</tr>
</tbody>
</table>
<p>
<div>
    <button class="btn btn-primary btn-large" id="bouton" style="visibility:hidden;">Next</button>
    <span id="bravo" style="color:red"> </span>

</div>
</p>


<h4>Reminder of the Guess Task:</h4>


<ul>
    <li>For each wage (so, within each row of the box above) you will provide your best guess of how much effort your
        worker will provide for that wage.</li>
    <li>Use the slider bar in each row to provide your guess. Note that when you move this slider,
        the two rightmost columns provide you realtime information on how
        much you would earn and how much your worker would earn for a given wage/effort combination.</li>
    <li>We pay you based on the accuracy of your guess. If your guess closely matches the amount of effort your
        worker agrees to actually provide at that level, then you earn $5. Otherwise, you earn nothing.</li>
</ul>



{% endblock %}

{% block scripts %}
    <script>
        var myVar = setInterval(function(){ myTask() }, 1000);

        function round(value, decimals) {
        return Number(Math.round(value+'e'+decimals)+'e-'+decimals);
        }

        function myTask(){
        effort1 = document.getElementById("id_eleffort1").value
        effort2 = document.getElementById("id_eleffort2").value
        effort3 = document.getElementById("id_eleffort3").value
        effort4 = document.getElementById("id_eleffort4").value
        effort5 = document.getElementById("id_eleffort5").value
        effort6 = document.getElementById("id_eleffort6").value
        effort7 = document.getElementById("id_eleffort7").value
        effort8 = document.getElementById("id_eleffort8").value
        effort9 = document.getElementById("id_eleffort9").value
        effort10 = document.getElementById("id_eleffort10").value
        effort11 = document.getElementById("id_eleffort11").value
        effort12 = document.getElementById("id_eleffort12").value
        effort13 = document.getElementById("id_eleffort13").value
        effort14 = document.getElementById("id_eleffort14").value
        effort15 = document.getElementById("id_eleffort15").value
        effort16 = document.getElementById("id_eleffort16").value
        document.getElementById("resultats1").innerHTML = round(1 - (effort1)**2/2,1)
        document.getElementById("resultats2").innerHTML = round(2 - (effort2)**2/2,1)
        document.getElementById("resultats3").innerHTML = round(3 - (effort3)**2/2,1)
        document.getElementById("resultats4").innerHTML = round(4 - (effort4)**2/2,1)
        document.getElementById("resultats5").innerHTML = round(5 - (effort5)**2/2,1)
        document.getElementById("resultats6").innerHTML = round(6 - (effort6)**2/2,1)
        document.getElementById("resultats7").innerHTML = round(7 - (effort7)**2/2,1)
        document.getElementById("resultats8").innerHTML = round(8 - (effort8)**2/2,1)
        document.getElementById("resultats9").innerHTML = round(9 - (effort9)**2/2,1)
        document.getElementById("resultats10").innerHTML = round(10 - (effort10)**2/2,1)
        document.getElementById("resultats11").innerHTML = round(11 - (effort11)**2/2,1)
        document.getElementById("resultats12").innerHTML = round(12 - (effort12)**2/2,1)
        document.getElementById("resultats13").innerHTML = round(13 - (effort13)**2/2,1)
        document.getElementById("resultats14").innerHTML = round(14 - (effort14)**2/2,1)
        document.getElementById("resultats15").innerHTML = round(15 - (effort15)**2/2,1)
        document.getElementById("resultats16").innerHTML = round(16 - (effort16)**2/2,1)
        document.getElementById("fresultats1").innerHTML = round(15*(effort1),1)
        document.getElementById("fresultats2").innerHTML = round(14*(effort2),1)
        document.getElementById("fresultats3").innerHTML = round(13*(effort3),1)
        document.getElementById("fresultats4").innerHTML = round(12*(effort4),1)
        document.getElementById("fresultats5").innerHTML = round(11*(effort5),1)
        document.getElementById("fresultats6").innerHTML = round(10*(effort6),1)
        document.getElementById("fresultats7").innerHTML = round(9*(effort7),1)
        document.getElementById("fresultats8").innerHTML = round(8*(effort8),1)
        document.getElementById("fresultats9").innerHTML = round(7*(effort9),1)
        document.getElementById("fresultats10").innerHTML = round(6*(effort10),1)
        document.getElementById("fresultats11").innerHTML = round(5*(effort11),1)
        document.getElementById("fresultats12").innerHTML = round(4*(effort12),1)
        document.getElementById("fresultats13").innerHTML = round(3*(effort13),1)
        document.getElementById("fresultats14").innerHTML = round(2*(effort14),1)
        document.getElementById("fresultats15").innerHTML = round(1*(effort15),1)
        document.getElementById("fresultats16").innerHTML = round(0,2)

        }
;
    </script>

<script>
  var myVar2 = setInterval(function(){ myTask2() }, 1000);

  function myTask2(){
          ciaoeffort1 = document.getElementById("resultats1").innerHTML;
          ciaoeffort2 = document.getElementById("resultats2").innerHTML;
          ciaoeffort3 = document.getElementById("resultats3").innerHTML;
          ciaoeffort4 = document.getElementById("resultats4").innerHTML;
          ciaoeffort5 = document.getElementById("resultats5").innerHTML;
          ciaoeffort6 = document.getElementById("resultats6").innerHTML;
          ciaoeffort7 = document.getElementById("resultats7").innerHTML;
          ciaoeffort8 = document.getElementById("resultats8").innerHTML;
          ciaoeffort9 = document.getElementById("resultats9").innerHTML;
          ciaoeffort10 = document.getElementById("resultats10").innerHTML;
          ciaoeffort11 = document.getElementById("resultats11").innerHTML;
          ciaoeffort12 = document.getElementById("resultats12").innerHTML;
          ciaoeffort13 = document.getElementById("resultats13").innerHTML;
          ciaoeffort14 = document.getElementById("resultats14").innerHTML;
          ciaoeffort15 = document.getElementById("resultats15").innerHTML;
          ciaoeffort16 = document.getElementById("resultats16").innerHTML;

          if (ciaoeffort1 >= 0 &&ciaoeffort2 >= 0 &&ciaoeffort3 >= 0 &&ciaoeffort4 >= 0 &&ciaoeffort5 >= 0 &&ciaoeffort6 >= 0 &&ciaoeffort7 >= 0 &&ciaoeffort8 >= 0 &&ciaoeffort9 >= 0 &&ciaoeffort10 >= 0 &&ciaoeffort11 >= 0 && ciaoeffort12 >= 0 && ciaoeffort13 >= 0 && ciaoeffort14 >= 0 && ciaoeffort15 >=0 && ciaoeffort16 >=0){
                document.getElementById("bouton").style.visibility = "visible";document.getElementById("bravo").innerHTML = "";

             }else{document.getElementById("bravo").innerHTML = "Negative payoff not allowed. You cannot proceed";
             document.getElementById("bouton").style.visibility = "hidden";}

        }
;
</script>

{% endblock %}
